(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){var e;function t(e,t,o){const c=document.querySelectorAll(e);c.forEach((e=>{const n=e.querySelectorAll(t),a=e.querySelectorAll(o);n.forEach(((e,n)=>{e.onclick=function(){const i=a[n].classList.contains("active");c.forEach((e=>{const c=e.querySelectorAll(o),n=e.querySelectorAll(t);c.forEach((e=>e.classList.remove("active"))),n.forEach((e=>e.classList.remove("active")))})),i||(a[n].classList.add("active"),e.classList.add("active"))}}))}))}function o(e,t,o,c=0){document.querySelectorAll(e).forEach((e=>{const n=e.querySelectorAll(t),a=e.querySelectorAll(o);n.forEach(((e,t)=>{e.addEventListener("click",(function(){a.forEach((e=>{e.classList.remove("active")})),a[t].classList.add("active"),n.forEach((e=>e.classList.remove("active"))),e.classList.add("active")}))})),n.length>0&&c<n.length&&n[c].click()}))}function c(e,t,o,c=0){document.querySelectorAll(e).forEach(((e,n)=>{const a=e.querySelector(t),i=e.querySelector(o);a.onclick=function(){const e=i.classList.contains("active");document.querySelectorAll(o).forEach((e=>{e.classList.remove("active"),e.style.maxHeight=0,e.previousElementSibling.classList.remove("active")})),e||(i.classList.add("active"),i.style.maxHeight=i.scrollHeight+"px",a.classList.add("active"))},n===c&&(i.classList.add("active"),i.style.maxHeight=i.scrollHeight+"px",a.classList.add("active"))}))}t(".options__content-tab-options-accordion",".options__content-tab-options-accordion-header",".options__content-tab-options-accordion-content"),o(".options__desctop",".options__tabs-btn",".options__content-tab"),c(".options__content-tab-options-accordion",".options__content-tab-options-accordion-header",".options__content-tab-options-accordion-content"),e=".detal-popup__accordion-content",document.querySelectorAll(".detal-popup__accordion").forEach(((t,o)=>{const c=t.querySelector(".detal-popup__accordion-header"),n=t.querySelector(e);c.onclick=function(){const t=n.classList.contains("active");document.querySelectorAll(e).forEach((e=>{e.classList.remove("active"),e.style.maxHeight=0,e.previousElementSibling.classList.remove("active")})),t||(n.classList.add("active"),n.style.maxHeight=n.scrollHeight+"px",c.classList.add("active"))}})),function(){const e=document.querySelector(".detal-sticky"),t=document.querySelector(".detal-header"),o=document.querySelector(".footer");window.addEventListener("scroll",(()=>{const c=t.getBoundingClientRect().bottom,n=o.getBoundingClientRect().top;0>=c?e.classList.add("active"):e.classList.remove("active"),n<=0&&e.classList.remove("active")}))}(),function(){const e=document.querySelectorAll(".detal-new__info-color-mobil-item");e[0].classList.add("active"),e.forEach((t=>{t.addEventListener("click",(()=>{e.forEach((e=>e.classList.remove("active"))),t.classList.add("active")}))}))}(),window.innerWidth>768&&(t(".equipment__accordion",".equipment__accordion-header-button-info",".equipment__accordion-content"),o(".equipment__accordion",".equipment__accordion-content-tabs-btn",".equipment__accordion-content-tab",0)),o(".stock-cars",".stock-cars__head-buttons-btn",".stock-cars__tab",0),window.innerWidth>768&&c(".equipment__accordion-content-tab-options-accordion",".equipment__accordion-content-tab-options-accordion-header",".equipment__accordion-content-tab-options-accordion-content")})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".select-two").forEach((e=>{e&&$(e).select2({placeholder:"Выберите опцию",allowClear:!0})}))})),document.addEventListener("DOMContentLoaded",(function(){!function(){const e=document.querySelector(".header__main-burger"),t=document.querySelector(".header-popup");e.addEventListener("click",(function(){this.classList.toggle("active"),t.classList.toggle("active")}))}();let e=document.querySelectorAll(".lazy-load"),t=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting){let o=e.target;if("img"===o.tagName.toLowerCase()){const e=o.getAttribute("data-src");o.src=e,o.classList.add("loaded")}if("picture"===o.tagName.toLowerCase()){const e=o.querySelector("source[data-srcset]"),t=o.querySelector("img[data-src]");if(e){const t=e.getAttribute("data-srcset");e.srcset=t}if(t){const e=t.getAttribute("data-src");t.src=e}o.classList.add("loaded")}else if("map"===o.id){if(!window.yandexMapDidInit){window.yandexMapDidInit=!0;const e=function(e){const t=document.createElement("script");return t.type="text/javascript",t.async=!0,t.src=e,t}(o.getAttribute("data-src"));document.querySelector("#map").appendChild(e)}o.classList.add("loaded")}if(o.classList.contains("background-load")){const e=o.getAttribute("data-bg");o.style.backgroundImage=`url(${e})`,o.classList.add("loaded")}o.classList.remove("lazy-load"),t.unobserve(o)}}))}));function o(e){document.querySelectorAll(e).forEach((e=>{const t=e.querySelector("a");t&&t.href===window.location.href&&e.classList.add("active")}))}async function c(e){const t=window.innerWidth,o=e.getAttribute("data-bg-desktop"),c=e.getAttribute("data-bg-mobile"),n=t<=778?c:o;try{await(a=n,new Promise(((e,t)=>{const o=new Image;o.src=a,o.onload=e,o.onerror=t}))),e.style.backgroundImage=`url(${n})`,e.classList.remove("lazy-load"),e.classList.add("loaded")}catch(e){console.error(`Ошибка загрузки изображения: ${e}`)}var a}e.forEach((function(e){t.observe(e)})),o(".header-popup__nav-item"),o(".header__main-nav-item"),function(){const e=document.querySelector(".header__main-nav-item:first-child"),t=document.querySelector(".header__main-mobil");e&&t&&(e.classList.contains("active")?t.classList.add("active"):t.classList.remove("active"))}(),function(){const e=document.querySelector(".header-popup__nav-link--services"),t=document.querySelector(".header-popup__nav-link-submenu-wrap");e&&t&&e.addEventListener("click",(()=>{t.classList.toggle("active")}))}();const n=new IntersectionObserver((function(e,t){e.forEach((e=>{e.isIntersecting&&(c(e.target),t.unobserve(e.target))}))}));document.querySelectorAll(".lazy-load.background-load").forEach((e=>{n.observe(e)})),window.addEventListener("resize",(()=>{document.querySelectorAll(".background-load").forEach((e=>{e.classList.contains("lazy-load")||c(e)}))})),(()=>{const e=document.querySelectorAll(".detal-new__info-characteristics-colors-item"),t=document.querySelector(".detal-new__info-characteristics-colors-item--last");if(!t||0===e.length)return;const o=t.textContent;t.addEventListener("click",(()=>{let c=!0;e.forEach((e=>{"block"!==e.style.display&&(c=!1),e.style.display=c?"none":"block"})),t.textContent=c?o:"Скрыть часть"}))})(),(()=>{const e=document.querySelectorAll(".brands__item"),t=document.querySelector(".brands__tab-button"),o=document.querySelector(".new-cars__filter-tabs--old-cars"),c=o?o.querySelectorAll(".new-cars__filter-tabs--item"):[],n=document.querySelector(".new-cars__filter-btn-mobile-open-wrap"),a=(e,t)=>{if(!t)return;const o=t.textContent;t.addEventListener("click",(()=>{const c=Array.from(e).every((e=>"block"===e.style.display));e.forEach((e=>{e.style.display=c?"none":"block"})),t.textContent=c?o:"Скрыть часть"}))};a(e,t),a(c,n)})(),document.querySelectorAll(".brands__item").forEach((e=>{const t=e.querySelector(".brands__item-select-wrap"),o=e.querySelectorAll(".brands__item-select-elem-link-name");Array.from(o).some((e=>e.textContent.trim()))||(t.style.display="none")}))})),document.addEventListener("DOMContentLoaded",(function(){function e(e,t,o,c){const n=document.querySelectorAll(e),a=document.querySelector(t),i=document.querySelector(o),s=document.querySelector(c);n.length&&a&&i&&(n.forEach((e=>{e.addEventListener("click",(function(){this.classList.toggle("active"),a.classList.toggle("active"),document.body.classList.toggle("active",a.classList.contains("active"))}))})),i.addEventListener("click",(function(){a.classList.remove("active"),document.body.classList.remove("active")})),a.addEventListener("click",(function(t){s.contains(t.target)||t.target.matches(e)||(a.classList.remove("active"),document.body.classList.remove("active"))})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(a.classList.remove("active"),document.body.classList.remove("active"))})))}e('[data-popup="popup-open"]',".window-popup",".window-popup-close",".window-popup-inner"),e('[data-detal="open-options"]',".detal-popup",".detal-popup__header-close"),e('[data-compare="compare-open"]',".compare-popup",".compare-popup__head-close",".compare-popup__wrap"),e('[data-vin="vin-open"]',".popup-vin",".popup-vin__head-close",".popup-vin__window")})),document.addEventListener("DOMContentLoaded",(function(){!function(e,t,o,c=0){document.querySelectorAll(e).forEach((e=>{const n=e.querySelectorAll(t),a=e.querySelectorAll(o);n.forEach(((e,t)=>{e.addEventListener("click",(function(){a.forEach((e=>{e.classList.remove("active")})),a[t].classList.add("active"),n.forEach((e=>e.classList.remove("active"))),e.classList.add("active")}))})),n.length>0&&c<n.length&&n[c].click()}))}(".stock-cars",".stock-cars__head-buttons-btn",".stock-cars__tab",0)})),document.addEventListener("DOMContentLoaded",(function(){!function(e,t,o,c=0){document.querySelectorAll(e).forEach(((e,n)=>{const a=e.querySelector(t),i=e.querySelector(o);a.onclick=function(){const e=i.classList.contains("active");document.querySelectorAll(o).forEach((e=>{e.classList.remove("active"),e.style.maxHeight=0,e.previousElementSibling.classList.remove("active")})),e||(i.classList.add("active"),i.style.maxHeight=i.scrollHeight+"px",a.classList.add("active"))},n===c&&(i.classList.add("active"),i.style.maxHeight=i.scrollHeight+"px",a.classList.add("active"))}))}(".compare-detal__accordion",".compare-detal__accordion-head",".compare-detal__accordion-content")})),new Swiper(".promo__container",{loop:!1,slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{0:{slidesPerView:1},768:{slidesPerView:1},1024:{slidesPerView:1},1300:{slidesPerView:1}}}),((e,t,o,c)=>{let n;const a=function(){return e.matches?(n=new Swiper(".popular__container",o),void(c&&c(n))):void(void 0!==n&&n.destroy(!0,!0))};(e=window.matchMedia(e)).addEventListener("change",a),a()})("(max-width: 768px)",0,{loop:!0,spaceBetween:8,slidesPerView:1.15,pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{500:{slidesPerView:2.5},768:{},1024:{},1300:{}}},(e=>{e&&e.on("slideChange",(function(t){console.log("*** mySwiper.activeIndex",e.activeIndex)}))})),new Swiper(".new-cars__container",{loop:!1,slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{0:{slidesPerView:1},768:{slidesPerView:1},1024:{slidesPerView:1},1300:{slidesPerView:1}}}),new Swiper(".detal-new-cars-swiper",{slidesPerView:1,spaceBetween:12,pagination:{el:".detal-new-cars-swiper-pagination",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'">'+(e+1)+"</span>"}},navigation:{nextEl:".detal-new-cars-swiper-next",prevEl:".detal-new-cars-swiper-prev"},breakpoints:{500:{slidesPerView:2},1024:{slidesPerView:3},1300:{slidesPerView:4}}}),((e,t,o,c)=>{let n;const a=function(){return e.matches?(n=new Swiper(".stock-swiper",o),void(c&&c(n))):void(void 0!==n&&n.destroy(!0,!0))};(e=window.matchMedia(e)).addEventListener("change",a),a()})("(min-width: 768px)",0,{loop:!0,spaceBetween:8,slidesPerView:1.15,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".stock-swiper-next",prevEl:".stock-swiper-prev"},pagination:{el:".stock-swiper-pagination",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'">'+(e+1)+"</span>"}},breakpoints:{768:{slidesPerView:2},1024:{slidesPerView:3},1300:{slidesPerView:4}}},(e=>{e&&e.on("slideChange",(function(t){console.log("*** mySwiper.activeIndex",e.activeIndex)}))})),((e,t,o,c)=>{let n;const a=function(){return e.matches?(n=new Swiper(".gallery__swiper",o),void(c&&c(n))):void(void 0!==n&&n.destroy(!0,!0))};(e=window.matchMedia(e)).addEventListener("change",a),a()})("(max-width: 768px)",0,{loop:!0,spaceBetween:8,slidesPerView:1.15,breakpoints:{500:{slidesPerView:1.5},768:{},1024:{},1300:{}}},(e=>{e&&e.on("slideChange",(function(t){console.log("*** mySwiper.activeIndex",e.activeIndex)}))}));let e=new Swiper(".detal-old__swiper-one",{loop:!0,spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0});new Swiper(".detal-old__swiper-two",{loop:!0,spaceBetween:10,slidesPerView:1.16,navigation:{nextEl:".detal-old__swiper-next",prevEl:".detal-old__swiper-prev"},thumbs:{swiper:e},breakpoints:{500:{slidesPerView:1.1},768:{slidesPerView:3},1024:{slidesPerView:1}}}),new Swiper(".sleders__swiper",{slidesPerView:1.1,spaceBetween:16,navigation:{nextEl:".sleders__next",prevEl:".sleders__prev"},breakpoints:{768:{slidesPerView:1}}}),document.addEventListener("DOMContentLoaded",(function(){const e=Array.from(document.querySelectorAll(".compare-auto__swiper")).map((e=>{if(!(e.querySelectorAll(".compare-auto__slide").length<1))return new Swiper(e,{loop:!0,slidesPerView:2.22,slidesPerGroup:1,spaceBetween:8,allowTouchMove:!1,pagination:{el:".compare-auto__pagination",type:"fraction"},navigation:{nextEl:".compare-auto__next",prevEl:".compare-auto__prev"},breakpoints:{768:{spaceBetween:12,slidesPerView:3}}});e.classList.add("swiper-disabled")}));document.querySelectorAll(".close-btn").forEach((t=>{t.addEventListener("click",(()=>{const o=t.closest(".swiper-slide"),c=o.parentNode;var n;n=Array.from(c.children).indexOf(o),e.forEach((e=>{const t=e.slides[n];t&&(t.remove(),e.update())}))}))}))})),document.addEventListener("DOMContentLoaded",(function(){const e=Array.from(document.querySelectorAll(".compare-detal__swiper")).map((e=>{if(!(e.querySelectorAll(".compare-detal__slide").length<3))return new Swiper(e,{loop:!0,slidesPerView:1.97,slidesPerGroup:1,spaceBetween:8,allowTouchMove:!1,pagination:{el:".compare-detal__pagination",type:"fraction"},navigation:{nextEl:".compare-detal__next",prevEl:".compare-detal__prev"},breakpoints:{768:{spaceBetween:12,slidesPerView:4}}});e.classList.add("swiper-disabled")}));document.querySelectorAll(".close-btn").forEach((t=>{t.addEventListener("click",(()=>{const o=t.closest(".swiper-slide"),c=o.parentNode;var n;n=Array.from(c.children).indexOf(o),e.forEach((e=>{const t=e.slides[n];t&&(t.remove(),e.update())}))}))}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".price-car").dataset.priceCar,t=document.getElementById("credit-sum"),o=document.getElementById("credit-payment"),c=document.getElementById("credit-term");t.value=l(e),o.value=l(0),c.value=c.value,d(c,"мес."),m(),d(t,"₽"),d(o,"₽"),t.addEventListener("input",(()=>u(t,"₽"))),o.addEventListener("input",(()=>{u(o,"₽"),function(){const c=parseFloat(o.value.replace(/\s|₽/g,""))||0,n=e-c;n<0?o.value=l(e):(t.value=l(n),d(t,"₽"),m())}()})),c.addEventListener("input",(()=>d(c,"мес.")));const n=document.querySelector(".calculator__credit-sum-minus"),a=document.querySelector(".calculator__credit-sum-plus"),i=document.querySelector(".calculator__credit-term-minus"),s=document.querySelector(".calculator__credit-term-plus");function r(c,n){const a=document.getElementById(c);let i=parseFloat(a.value.replace(/\s|₽|мес./g,""))||0;i+=n,"credit-sum"===c&&(i=Math.max(0,Math.min(i,e))),a.value=l(i),d(a,a.dataset.simbol),"credit-sum"===c&&function(){const c=parseFloat(t.value.replace(/\s|₽/g,""))||0,n=e-c;n<0?t.value=l(e):(o.value=l(n),d(o,"₽"),m())}(),m()}function l(e){return Math.floor(e).toLocaleString("ru-RU")}function d(e,t){e.value=e.value.replace(/\D/g,""),e.value=e.value.replace(/\B(?=(\d{3})+(?!\d))/g," "),e.value&&!e.value.endsWith(t)&&(e.value+=" "+t),p(e)}function u(e,t){const o=e.value.replace(/\D/g,"");e.value=e.value.replace(/\B(?=(\d{3})+(?!\d))/g," ");const c=l(o);e.value=c,c&&!c.endsWith(t)&&(e.value+=" "+t),p(e)}function p(e){const t=e.value.length;e.setSelectionRange(t-2,t-2)}function m(){const t=parseFloat(o.value.replace(/\s|₽/g,""))||0,n=parseInt(c.value)||0,a=e-t;if(a>0&&n>0){const e=.1/12,t=a*e/(1-Math.pow(1+e,-n));document.getElementById("monthly-payment").textContent=l(Math.round(t))+" ₽/мес"}else document.getElementById("monthly-payment").textContent="0 ₽/мес"}n.addEventListener("click",(function(){r("credit-sum",-1e4)})),a.addEventListener("click",(function(){r("credit-sum",1e4)})),i.addEventListener("click",(function(){r("credit-term",-1)})),s.addEventListener("click",(function(){r("credit-term",1)}))})),document.addEventListener("DOMContentLoaded",(function(){function e(e,t){const o=document.querySelectorAll(e),c=document.querySelectorAll(t);o.forEach((e=>{e.addEventListener("click",(function(){let t=e,n=t.getAttribute("data-tab"),a=document.querySelector(n);t.classList.contains("active")||(o.forEach((e=>e.classList.remove("active"))),c.forEach((e=>e.classList.remove("active"))),t.classList.add("active"),a.classList.add("active"))}))}));const n=Array.from(o).find((e=>"true"===e.dataset.defaultTab));n?n.click():o.length>0&&o[0].click()}if(function(){const e=document.querySelectorAll(".new-cars__filter-top-buttons-btn"),t=document.querySelector(".all-auto"),o=document.querySelector(".new-cars__filter-btn-mobile-open-wrap");e.length&&t&&o?(console.log("Настройка фильтров..."),e[1].addEventListener("click",(()=>{t.classList.add("active")})),e[0].addEventListener("click",(()=>{t.classList.remove("active"),t.classList.remove("active-mobil")})),o.addEventListener("click",(function(){"Скрыть часть"===this.textContent?t.classList.add("active-mobil"):t.classList.remove("active-mobil")}))):console.error("Один или несколько элементов не найдены")}(),e(".brands__top-buttons-btn",".brands__tab"),e(".new-cars__filter-top-buttons-btn",".new-cars__filter-tabs"),function(){const e=document.querySelectorAll('[data-select="selectt"]');e.forEach((t=>{const o=t.querySelector('[data-select="select-open"]'),c=t.querySelector(".all-auto__top-filter-selected"),n=t.querySelector(".all-auto__top-filter-selected-text");c.addEventListener("click",(c=>{c.stopPropagation();const n=t.classList.contains("active");e.forEach((e=>{e.classList.remove("active"),e.querySelector('[data-select="select-open"]').classList.remove("active")})),n||(t.classList.add("active"),o.classList.add("active"))})),o.querySelectorAll(".all-auto__top-filter-select-item").forEach((e=>{e.addEventListener("click",(c=>{c.stopPropagation(),n.textContent=e.textContent,t.classList.remove("active"),o.classList.remove("active")}))})),document.addEventListener("click",(()=>{t.classList.remove("active"),o.classList.remove("active")}))}))}(),"/new-cars.html"===window.location.pathname||"/used-cars.html"===window.location.pathname){function t(e){const t=document.querySelectorAll(e);t[0].classList.add("active"),t.forEach((e=>{e.addEventListener("click",(()=>{t.forEach((e=>e.classList.remove("active"))),e.classList.add("active")}))}))}t(".all-auto__prices-btn")}})),function(){let e=new Image;e.onload=e.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}()})();