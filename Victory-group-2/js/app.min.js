(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".all-auto__prices-btn");function t(e){e.forEach((e=>{const t=e.querySelector("a");t&&t.href===window.location.href&&e.classList.add("active")}))}function n(){document.querySelector(".window-popup").classList.remove("active"),document.querySelector("body").classList.remove("active")}e.forEach((t=>{t.addEventListener("click",(()=>{e.forEach((e=>e.classList.remove("active"))),t.classList.add("active")}))})),t(document.querySelectorAll(".header-popup__nav-item")),t(document.querySelectorAll(".header__main-nav-item")),document.querySelector(".header__main-nav-item:first-child").classList.contains("active")?document.querySelector(".header__main-mobil").classList.add("active"):document.querySelector(".header__main-mobil").classList.remove("active"),document.querySelector(".header-popup__nav-link--services").addEventListener("click",(function(){document.querySelector(".header-popup__nav-link-submenu-wrap").classList.toggle("active")})),document.querySelector(".header__main-burger").addEventListener("click",(function(){this.classList.toggle("active"),this.classList.contains("active")?(document.querySelector(".header-popup").classList.add("active"),document.querySelector("body").classList.add("active")):(document.querySelector(".header-popup").classList.remove("active"),document.querySelector("body").classList.remove("active"))})),document.querySelectorAll('[data-popup="popup-open"]').forEach((e=>{e.addEventListener("click",(function(){document.querySelector(".window-popup").classList.add("active"),document.querySelector("body").classList.add("active")}))})),document.querySelector(".window-popup-close").addEventListener("click",(function(){n()})),document.querySelector("body").addEventListener("click",(function(e){e.target.closest(".window-popup-inner")||e.target.closest('[data-popup="popup-open"]')||e.target.closest(".window-popup-close")||n()}));const o=document.querySelector(".window-popup-form"),i=document.querySelector(".window-popup-error"),r=document.querySelector(".form__content-form"),a=document.querySelector(".form__content-error");function c(e,t){e&&t&&e.addEventListener("submit",(function(o){o.preventDefault();const i=e.querySelector('input[type="text"]'),r=e.querySelector('input[type="tel"]');return i.addEventListener("keypress",(function(e){"Enter"===e.key&&(e.preventDefault(),r.focus())})),t.style.display="none",t.textContent="",i.style.border="1px solid #DDE3EE",r.style.border="1px solid #DDE3EE",i.value.length<2?(t.textContent="Пожалуйста, введите ваше имя.",t.style.display="block",void(i.style.border="1px solid red")):/^\+7 \(\d{3}\) \d{3}-\d{2}-\d{2}$/.test(r.value.trim())?(i.value="",r.value="",n(),document.querySelector(".window-popup-ok").classList.add("active"),void document.querySelector("body").classList.add("active")):(t.textContent="Пожалуйста, введите корректный номер телефона.",t.style.display="block",void(r.style.border="1px solid red"))}))}o&&i&&c(o,i),r&&a&&c(r,a);const s=document.querySelector(".window-popup-ok-close-btn");var l;function d(){const e=document.querySelectorAll(".achievements"),t=document.querySelectorAll(".form"),n=document.querySelectorAll(".new-cars__baner"),o=document.querySelectorAll(".baner__background");function i(e){e.forEach((e=>{const t=e.getAttribute("data-desktop"),n=e.getAttribute("data-mobile");window.innerWidth<=768?e.style.backgroundImage=`url(${n})`:e.style.backgroundImage=`url(${t})`}))}i(e),i(t),i(n),i(o)}s&&s.addEventListener("click",(function(){document.querySelector(".window-popup-ok").classList.remove("active"),document.querySelector("body").classList.remove("active")})),l=function(e){var t,n=navigator.userAgent,o=/iphone/i.test(n),i=/chrome/i.test(n),r=/android/i.test(n);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each((function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((n=this.createTextRange()).collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())}))):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(n,a){var c,s,l,d,u,p,m;if(!n&&this.length>0){var v=e(this[0]).data(e.mask.dataName);return v?v():void 0}return a=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},a),c=e.mask.definitions,s=[],l=p=n.length,d=null,e.each(n.split(""),(function(e,t){"?"==t?(p--,l=e):c[t]?(s.push(new RegExp(c[t])),null===d&&(d=s.length-1),l>e&&(u=s.length-1)):s.push(null)})),this.trigger("unmask").each((function(){function v(){if(a.completed){for(var e=d;u>=e;e++)if(s[e]&&_[e]===f(e))return;a.completed.call(S)}}function f(e){return a.placeholder.charAt(e<a.placeholder.length?e:0)}function g(e){for(;++e<p&&!s[e];);return e}function y(e,t){var n,o;if(!(0>e)){for(n=e,o=g(t);p>n;n++)if(s[n]){if(!(p>o&&s[n].test(_[o])))break;_[n]=_[o],_[o]=f(o),o=g(o)}b(),S.caret(Math.max(d,e))}}function h(){k(),S.val()!=q&&S.change()}function w(e,t){var n;for(n=e;t>n&&p>n;n++)s[n]&&(_[n]=f(n))}function b(){S.val(_.join(""))}function k(e){var t,n,o,i=S.val(),r=-1;for(t=0,o=0;p>t;t++)if(s[t]){for(_[t]=f(t);o++<i.length;)if(n=i.charAt(o-1),s[t].test(n)){_[t]=n,r=t;break}if(o>i.length){w(t+1,p);break}}else _[t]===i.charAt(o)&&o++,l>t&&(r=t);return e?b():l>r+1?a.autoclear||_.join("")===L?(S.val()&&S.val(""),w(0,p)):b():(b(),S.val(S.val().substring(0,r+1))),l?t:d}var S=e(this),_=e.map(n.split(""),(function(e,t){return"?"!=e?c[e]?f(t):e:void 0})),L=_.join(""),q=S.val();S.data(e.mask.dataName,(function(){return e.map(_,(function(e,t){return s[t]&&e!=f(t)?e:null})).join("")})),S.one("unmask",(function(){S.off(".mask").removeData(e.mask.dataName)})).on("focus.mask",(function(){var e;S.prop("readonly")||(clearTimeout(t),q=S.val(),e=k(),t=setTimeout((function(){S.get(0)===document.activeElement&&(b(),e==n.replace("?","").length?S.caret(0,e):S.caret(e))}),10))})).on("blur.mask",h).on("keydown.mask",(function(e){if(!S.prop("readonly")){var t,n,i,r=e.which||e.keyCode;m=S.val(),8===r||46===r||o&&127===r?(n=(t=S.caret()).begin,(i=t.end)-n==0&&(n=46!==r?function(e){for(;--e>=0&&!s[e];);return e}(n):i=g(n-1),i=46===r?g(i):i),w(n,i),y(n,i-1),e.preventDefault()):13===r?h.call(this,e):27===r&&(S.val(q),S.caret(0,k()),e.preventDefault())}})).on("keypress.mask",(function(t){if(!S.prop("readonly")){var n,o,i,a=t.which||t.keyCode,c=S.caret();t.ctrlKey||t.altKey||t.metaKey||32>a||!a||13===a||(c.end-c.begin!=0&&(w(c.begin,c.end),y(c.begin,c.end-1)),n=g(c.begin-1),p>n&&(o=String.fromCharCode(a),s[n].test(o))&&(function(e){var t,n,o,i;for(t=e,n=f(e);p>t;t++)if(s[t]){if(o=g(t),i=_[t],_[t]=n,!(p>o&&s[o].test(i)))break;n=i}}(n),_[n]=o,b(),i=g(n),r?setTimeout((function(){e.proxy(e.fn.caret,S,i)()}),0):S.caret(i),c.begin<=u&&v()),t.preventDefault())}})).on("input.mask paste.mask",(function(){S.prop("readonly")||setTimeout((function(){var e=k(!0);S.caret(e),v()}),0)})),i&&r&&S.off("input.mask").on("input.mask",(function(){var e=S.val(),t=S.caret();if(m&&m.length&&m.length>e.length){for(k(!0);t.begin>0&&!s[t.begin-1];)t.begin--;if(0===t.begin)for(;t.begin<d&&!s[t.begin];)t.begin++;S.caret(t.begin,t.begin)}else{for(k(!0);t.begin<p&&!s[t.begin];)t.begin++;S.caret(t.begin,t.begin)}v()})),k()}))}})},"function"==typeof define&&define.amd?define(["jquery"],l):l("object"==typeof exports?require("jquery"):jQuery),$(".art-stranger").mask("+7 (999) 999-99-99"),$.fn.setCursorPosition=function(e){if($(this).get(0).setSelectionRange)$(this).get(0).setSelectionRange(e,e);else if($(this).get(0).createTextRange){var t=$(this).get(0).createTextRange();t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select()}},$('input[type="tel"]').click((function(){$(this).setCursorPosition(4)})),window.addEventListener("resize",d),window.addEventListener("load",d),document.querySelectorAll('[data-select="select"]').forEach((e=>{const t=e.querySelector('[data-select="select-open"]'),n=e.querySelector('[data-select="select-detal"]');e.addEventListener("click",(()=>{e.classList.toggle("active"),t.classList.toggle("active"),n.classList.toggle("active")})),t.querySelectorAll("div").forEach((o=>{o.addEventListener("click",(()=>{e.querySelector("p").textContent=o.textContent+" ",e.classList.remove("active"),t.classList.remove("active"),n.classList.remove("active")}))})),document.addEventListener("click",(o=>{o.target.closest('[data-select="select"]')||(e.classList.remove("active"),t.classList.remove("active"),n.classList.remove("active"))}))}));const u=document.querySelectorAll(".brands__top-buttons-btn"),p=document.querySelectorAll(".brands__tab"),m=document.querySelectorAll(".new-cars__filter-top-buttons-btn"),v=document.querySelectorAll(".new-cars__filter-tabs");function f(e,t){e.forEach((n=>{n.addEventListener("click",(function(){let o=n,i=o.getAttribute("data-tab"),r=document.querySelector(i);o.classList.contains("active")||(e.forEach((function(e){e.classList.remove("active")})),t.forEach((function(e){e.classList.remove("active")})),o.classList.add("active"),r.classList.add("active"))}))}))}f(u,p),f(m,v),u.length>0&&u[0].click(),m.length>1&&m[0].click();const g=document.querySelectorAll(".brands__item"),y=document.querySelector(".brands__tab-button"),h=document.querySelector(".new-cars__filter-tabs--old-cars"),w=h?h.querySelectorAll(".new-cars__filter-tabs--item"):[],b=document.querySelector(".new-cars__filter-btn-mobile-open-wrap"),k=(e,t)=>{if(!t)return;const n=t.textContent;t.addEventListener("click",(()=>{const o=Array.from(e).every((e=>"block"===e.style.display));e.forEach((e=>{e.style.display=o?"none":"block"})),t.textContent=o?n:"Скрыть часть"}))};k(g,y),k(w,b),document.querySelectorAll(".brands__item").forEach((e=>{const t=e.querySelector(".brands__item-select-wrap"),n=e.querySelectorAll(".brands__item-select-elem-link-name");let o=!1;n.forEach((e=>{e.textContent.trim()&&(o=!0)})),o||(t.style.display="none")}))})),new Swiper(".promo__container",{loop:!1,slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{0:{slidesPerView:1},768:{slidesPerView:1},1024:{slidesPerView:1},1300:{slidesPerView:1}}}),((e,t,n,o)=>{let i;const r=function(){return e.matches?(i=new Swiper(".popular__container",n),void(o&&o(i))):void(void 0!==i&&i.destroy(!0,!0))};(e=window.matchMedia(e)).addEventListener("change",r),r()})("(max-width: 768px)",0,{loop:!0,spaceBetween:8,slidesPerView:1.15,pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{500:{slidesPerView:2.5},768:{},1024:{},1300:{}}},(e=>{e&&e.on("slideChange",(function(t){console.log("*** mySwiper.activeIndex",e.activeIndex)}))})),new Swiper(".new-cars__container",{loop:!1,slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{0:{slidesPerView:1},768:{slidesPerView:1},1024:{slidesPerView:1},1300:{slidesPerView:1}}}),new Swiper(".all-auto__new-cars",{slidesPerView:1,spaceBetween:12,slidesPerGroup:1,autoHeight:!1,grid:{rows:1},pagination:{el:".swiper-pagination",dynamicBullets:!0,clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'">'+(e+1)+"</span>"}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{0:{slidesPerView:1},768:{slidesPerView:2,slidesPerGroup:2,grid:{rows:2}},1024:{slidesPerView:3,slidesPerGroup:2,grid:{rows:2}},1300:{grid:{rows:3},slidesPerGroup:4,slidesPerView:4}}}),((e,t,n,o)=>{let i;const r=function(){return e.matches?(i=new Swiper(".stock-swiper",n),void(o&&o(i))):void(void 0!==i&&i.destroy(!0,!0))};(e=window.matchMedia(e)).addEventListener("change",r),r()})("(min-width: 768px)",0,{loop:!0,spaceBetween:8,slidesPerView:1.15,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".stock-swiper-next",prevEl:".stock-swiper-prev"},pagination:{el:".stock-swiper-pagination",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'">'+(e+1)+"</span>"}},breakpoints:{768:{slidesPerView:2},1024:{slidesPerView:3},1300:{slidesPerView:4}}},(e=>{e&&e.on("slideChange",(function(t){console.log("*** mySwiper.activeIndex",e.activeIndex)}))})),function(){let e=new Image;e.onload=e.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}()})();