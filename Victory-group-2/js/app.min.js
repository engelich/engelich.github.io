(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){var e;function t(e,t,n){const o=document.querySelectorAll(e);o.forEach((e=>{const c=e.querySelectorAll(t),i=e.querySelectorAll(n);c.forEach(((e,c)=>{e.onclick=function(){const a=i[c].classList.contains("active");o.forEach((e=>{const o=e.querySelectorAll(n),c=e.querySelectorAll(t);o.forEach((e=>e.classList.remove("active"))),c.forEach((e=>e.classList.remove("active")))})),a||(i[c].classList.add("active"),e.classList.add("active"))}}))}))}function n(e,t,n){document.querySelectorAll(e).forEach((e=>{const o=e.querySelectorAll(t),c=e.querySelectorAll(n);o.forEach(((e,t)=>{e.addEventListener("click",(function(){c.forEach((e=>{e.classList.remove("active")})),c[t].classList.add("active"),o.forEach((e=>e.classList.remove("active"))),e.classList.add("active")}))})),o.length>0&&o[0].click()}))}function o(e,t,n,o=0){document.querySelectorAll(e).forEach(((e,c)=>{const i=e.querySelector(t),a=e.querySelector(n);i.onclick=function(){const e=a.classList.contains("active");document.querySelectorAll(n).forEach((e=>{e.classList.remove("active"),e.style.maxHeight=0,e.previousElementSibling.classList.remove("active")})),e||(a.classList.add("active"),a.style.maxHeight=a.scrollHeight+"px",i.classList.add("active"))},c===o&&(a.classList.add("active"),a.style.maxHeight=a.scrollHeight+"px",i.classList.add("active"))}))}t(".options__content-tab-options-accordion",".options__content-tab-options-accordion-header",".options__content-tab-options-accordion-content"),n(".options__desctop",".options__tabs-btn",".options__content-tab"),o(".options__content-tab-options-accordion",".options__content-tab-options-accordion-header",".options__content-tab-options-accordion-content"),e=".detal-popup__accordion-content",document.querySelectorAll(".detal-popup__accordion").forEach(((t,n)=>{const o=t.querySelector(".detal-popup__accordion-header"),c=t.querySelector(e);o.onclick=function(){const t=c.classList.contains("active");document.querySelectorAll(e).forEach((e=>{e.classList.remove("active"),e.style.maxHeight=0,e.previousElementSibling.classList.remove("active")})),t||(c.classList.add("active"),c.style.maxHeight=c.scrollHeight+"px",o.classList.add("active"))}})),function(){const e=document.querySelector(".detal-sticky"),t=document.querySelector(".detal-header"),n=document.querySelector(".footer");window.addEventListener("scroll",(()=>{const o=t.getBoundingClientRect().bottom,c=n.getBoundingClientRect().top;0>=o?e.classList.add("active"):e.classList.remove("active"),c<=0&&e.classList.remove("active")}))}(),function(){const e=document.querySelectorAll(".detal-new__info-color-mobil-item");e[0].classList.add("active"),e.forEach((t=>{t.addEventListener("click",(()=>{e.forEach((e=>e.classList.remove("active"))),t.classList.add("active")}))}))}(),window.innerWidth>768&&(t(".equipment__accordion",".equipment__accordion-header-button-info",".equipment__accordion-content"),n(".equipment__accordion",".equipment__accordion-content-tabs-btn",".equipment__accordion-content-tab")),window.innerWidth>768&&o(".equipment__accordion-content-tab-options-accordion",".equipment__accordion-content-tab-options-accordion-header",".equipment__accordion-content-tab-options-accordion-content")})),document.addEventListener("DOMContentLoaded",(function(){var e;e=function(e){var t,n=navigator.userAgent,o=/iphone/i.test(n),c=/chrome/i.test(n),i=/android/i.test(n);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each((function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((n=this.createTextRange()).collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())}))):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(n,a){var r,s,l,d,u,p,m;if(!n&&this.length>0){var v=e(this[0]).data(e.mask.dataName);return v?v():void 0}return a=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},a),r=e.mask.definitions,s=[],l=p=n.length,d=null,e.each(n.split(""),(function(e,t){"?"==t?(p--,l=e):r[t]?(s.push(new RegExp(r[t])),null===d&&(d=s.length-1),l>e&&(u=s.length-1)):s.push(null)})),this.trigger("unmask").each((function(){function v(){if(a.completed){for(var e=d;u>=e;e++)if(s[e]&&S[e]===f(e))return;a.completed.call(L)}}function f(e){return a.placeholder.charAt(e<a.placeholder.length?e:0)}function y(e){for(;++e<p&&!s[e];);return e}function g(e,t){var n,o;if(!(0>e)){for(n=e,o=y(t);p>n;n++)if(s[n]){if(!(p>o&&s[n].test(S[o])))break;S[n]=S[o],S[o]=f(o),o=y(o)}_(),L.caret(Math.max(d,e))}}function h(){b(),L.val()!=k&&L.change()}function w(e,t){var n;for(n=e;t>n&&p>n;n++)s[n]&&(S[n]=f(n))}function _(){L.val(S.join(""))}function b(e){var t,n,o,c=L.val(),i=-1;for(t=0,o=0;p>t;t++)if(s[t]){for(S[t]=f(t);o++<c.length;)if(n=c.charAt(o-1),s[t].test(n)){S[t]=n,i=t;break}if(o>c.length){w(t+1,p);break}}else S[t]===c.charAt(o)&&o++,l>t&&(i=t);return e?_():l>i+1?a.autoclear||S.join("")===E?(L.val()&&L.val(""),w(0,p)):_():(_(),L.val(L.val().substring(0,i+1))),l?t:d}var L=e(this),S=e.map(n.split(""),(function(e,t){return"?"!=e?r[e]?f(t):e:void 0})),E=S.join(""),k=L.val();L.data(e.mask.dataName,(function(){return e.map(S,(function(e,t){return s[t]&&e!=f(t)?e:null})).join("")})),L.one("unmask",(function(){L.off(".mask").removeData(e.mask.dataName)})).on("focus.mask",(function(){var e;L.prop("readonly")||(clearTimeout(t),k=L.val(),e=b(),t=setTimeout((function(){L.get(0)===document.activeElement&&(_(),e==n.replace("?","").length?L.caret(0,e):L.caret(e))}),10))})).on("blur.mask",h).on("keydown.mask",(function(e){if(!L.prop("readonly")){var t,n,c,i=e.which||e.keyCode;m=L.val(),8===i||46===i||o&&127===i?(n=(t=L.caret()).begin,(c=t.end)-n==0&&(n=46!==i?function(e){for(;--e>=0&&!s[e];);return e}(n):c=y(n-1),c=46===i?y(c):c),w(n,c),g(n,c-1),e.preventDefault()):13===i?h.call(this,e):27===i&&(L.val(k),L.caret(0,b()),e.preventDefault())}})).on("keypress.mask",(function(t){if(!L.prop("readonly")){var n,o,c,a=t.which||t.keyCode,r=L.caret();t.ctrlKey||t.altKey||t.metaKey||32>a||!a||13===a||(r.end-r.begin!=0&&(w(r.begin,r.end),g(r.begin,r.end-1)),n=y(r.begin-1),p>n&&(o=String.fromCharCode(a),s[n].test(o))&&(function(e){var t,n,o,c;for(t=e,n=f(e);p>t;t++)if(s[t]){if(o=y(t),c=S[t],S[t]=n,!(p>o&&s[o].test(c)))break;n=c}}(n),S[n]=o,_(),c=y(n),i?setTimeout((function(){e.proxy(e.fn.caret,L,c)()}),0):L.caret(c),r.begin<=u&&v()),t.preventDefault())}})).on("input.mask paste.mask",(function(){L.prop("readonly")||setTimeout((function(){var e=b(!0);L.caret(e),v()}),0)})),c&&i&&L.off("input.mask").on("input.mask",(function(){var e=L.val(),t=L.caret();if(m&&m.length&&m.length>e.length){for(b(!0);t.begin>0&&!s[t.begin-1];)t.begin--;if(0===t.begin)for(;t.begin<d&&!s[t.begin];)t.begin++;L.caret(t.begin,t.begin)}else{for(b(!0);t.begin<p&&!s[t.begin];)t.begin++;L.caret(t.begin,t.begin)}v()})),b()}))}})},"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery),$(".art-stranger").mask("+7 (999) 999-99-99"),$.fn.setCursorPosition=function(e){if($(this).get(0).setSelectionRange)$(this).get(0).setSelectionRange(e,e);else if($(this).get(0).createTextRange){var t=$(this).get(0).createTextRange();t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select()}},$('input[type="tel"]').click((function(){$(this).setCursorPosition(4)}));const t=document.querySelector(".window-popup-form"),n=document.querySelector(".window-popup-error"),o=document.querySelector(".form__content-form"),c=document.querySelector(".form__content-error"),i=document.querySelector(".present__form-wrap"),a=document.querySelector(".present__form-error"),r=document.querySelector(".calculator__form-wrap"),s=document.querySelector(".form-error");function l(e,t){e&&t&&e.addEventListener("submit",(function(n){n.preventDefault();const o=e.querySelector('input[type="text"]'),c=e.querySelector('input[type="tel"]');return o.addEventListener("keypress",(function(e){"Enter"===e.key&&(e.preventDefault(),c.focus())})),t.style.display="none",t.textContent="",o.style.border="1px solid #DDE3EE",c.style.border="1px solid #DDE3EE",o.value.length<2?(t.textContent="Пожалуйста, введите ваше имя.",t.style.display="block",void(o.style.border="1px solid red")):/^\+7 \(\d{3}\) \d{3}-\d{2}-\d{2}$/.test(c.value.trim())?(o.value="",c.value="",document.querySelector(".window-popup").classList.remove("active"),document.querySelector(".window-popup-ok").classList.add("active"),void document.querySelector("body").classList.add("active")):(t.textContent="Пожалуйста, введите корректный номер телефона.",t.style.display="block",void(c.style.border="1px solid red"))}))}t&&n&&l(t,n),o&&c&&l(o,c),i&&a&&l(i,a),r&&s&&l(r,s);const d=document.querySelector(".window-popup-ok-close-btn");d&&d.addEventListener("click",(function(){document.querySelector(".window-popup-ok").classList.remove("active"),document.querySelector("body").classList.remove("active")}))})),document.addEventListener("DOMContentLoaded",(function(){function e(e){document.querySelectorAll(e).forEach((e=>{const t=e.querySelector("a");t&&t.href===window.location.href&&e.classList.add("active")}))}function t(){const e=document.querySelectorAll(".achievements"),t=document.querySelectorAll(".form"),n=document.querySelectorAll(".new-cars__baner"),o=document.querySelectorAll(".baner__background");function c(e){e.forEach((e=>{const t=e.getAttribute("data-desktop"),n=e.getAttribute("data-mobile");window.innerWidth<=768?e.style.backgroundImage=`url(${n})`:e.style.backgroundImage=`url(${t})`}))}c(e),c(t),c(n),c(o)}e(".header-popup__nav-item"),e(".header__main-nav-item"),function(){const e=document.querySelector(".header__main-nav-item:first-child"),t=document.querySelector(".header__main-mobil");e&&t&&(e.classList.contains("active")?t.classList.add("active"):t.classList.remove("active"))}(),function(){const e=document.querySelector(".header-popup__nav-link--services"),t=document.querySelector(".header-popup__nav-link-submenu-wrap");e&&t&&e.addEventListener("click",(()=>{t.classList.toggle("active")}))}(),window.addEventListener("resize",t),window.addEventListener("load",t),(()=>{const e=document.querySelectorAll(".detal-new__info-characteristics-colors-item"),t=document.querySelector(".detal-new__info-characteristics-colors-item--last");if(!t||0===e.length)return;const n=t.textContent;t.addEventListener("click",(()=>{let o=!0;e.forEach((e=>{"block"!==e.style.display&&(o=!1),e.style.display=o?"none":"block"})),t.textContent=o?n:"Скрыть часть"}))})(),(()=>{const e=document.querySelectorAll(".brands__item"),t=document.querySelector(".brands__tab-button"),n=document.querySelector(".new-cars__filter-tabs--old-cars"),o=n?n.querySelectorAll(".new-cars__filter-tabs--item"):[],c=document.querySelector(".new-cars__filter-btn-mobile-open-wrap"),i=(e,t)=>{if(!t)return;const n=t.textContent;t.addEventListener("click",(()=>{const o=Array.from(e).every((e=>"block"===e.style.display));e.forEach((e=>{e.style.display=o?"none":"block"})),t.textContent=o?n:"Скрыть часть"}))};i(e,t),i(o,c)})(),document.querySelectorAll(".brands__item").forEach((e=>{const t=e.querySelector(".brands__item-select-wrap"),n=e.querySelectorAll(".brands__item-select-elem-link-name");Array.from(n).some((e=>e.textContent.trim()))||(t.style.display="none")})),function(e){const t=document.querySelectorAll(e),n=document.querySelector(".header-popup");t.forEach((e=>{e.addEventListener("click",(function(){this.classList.toggle("active"),n.classList.toggle("active"),document.body.classList.toggle("active",n.classList.contains("active"))}))})),btnsMobilDetalPopupClose.addEventListener("click",(function(){n.classList.remove("active"),document.body.classList.remove("active")})),n.addEventListener("click",(function(t){btnsMobilDetalPopupWindow.contains(t.target)||t.target.matches(e)||(n.classList.remove("active"),document.body.classList.remove("active"))})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(n.classList.remove("active"),document.body.classList.remove("active"))}))}(".header__main-burger")})),document.addEventListener("DOMContentLoaded",(function(){function e(e,t,n,o){const c=document.querySelectorAll(e),i=document.querySelector(t),a=document.querySelector(n),r=document.querySelector(o);c.length&&i&&a&&(c.forEach((e=>{e.addEventListener("click",(function(){this.classList.toggle("active"),i.classList.toggle("active"),document.body.classList.toggle("active",i.classList.contains("active"))}))})),a.addEventListener("click",(function(){i.classList.remove("active"),document.body.classList.remove("active")})),i.addEventListener("click",(function(t){r.contains(t.target)||t.target.matches(e)||(i.classList.remove("active"),document.body.classList.remove("active"))})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(i.classList.remove("active"),document.body.classList.remove("active"))})))}e('[data-popup="popup-open"]',".window-popup",".window-popup-close",".window-popup-inner"),e(".header__main-burger",".header-popup"),e('[data-detal="open-options"]',".detal-popup",".detal-popup__header-close"),e('[data-compare="compare-open"]',".compare-popup",".compare-popup__head-close",".compare-popup__wrap"),e('[data-vin="vin-open"]',".popup-vin",".popup-vin__head-close",".popup-vin__window")})),new Swiper(".promo__container",{loop:!1,slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{0:{slidesPerView:1},768:{slidesPerView:1},1024:{slidesPerView:1},1300:{slidesPerView:1}}}),((e,t,n,o)=>{let c;const i=function(){return e.matches?(c=new Swiper(".popular__container",n),void(o&&o(c))):void(void 0!==c&&c.destroy(!0,!0))};(e=window.matchMedia(e)).addEventListener("change",i),i()})("(max-width: 768px)",0,{loop:!0,spaceBetween:8,slidesPerView:1.15,pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{500:{slidesPerView:2.5},768:{},1024:{},1300:{}}},(e=>{e&&e.on("slideChange",(function(t){console.log("*** mySwiper.activeIndex",e.activeIndex)}))})),new Swiper(".new-cars__container",{loop:!1,slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{0:{slidesPerView:1},768:{slidesPerView:1},1024:{slidesPerView:1},1300:{slidesPerView:1}}}),new Swiper(".detal-new-cars-swiper",{slidesPerView:1,spaceBetween:12,pagination:{el:".detal-new-cars-swiper-pagination",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'">'+(e+1)+"</span>"}},navigation:{nextEl:".detal-new-cars-swiper-next",prevEl:".detal-new-cars-swiper-prev"},breakpoints:{500:{slidesPerView:2},1024:{slidesPerView:3},1300:{slidesPerView:4}}}),((e,t,n,o)=>{let c;const i=function(){return e.matches?(c=new Swiper(".stock-swiper",n),void(o&&o(c))):void(void 0!==c&&c.destroy(!0,!0))};(e=window.matchMedia(e)).addEventListener("change",i),i()})("(min-width: 768px)",0,{loop:!0,spaceBetween:8,slidesPerView:1.15,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".stock-swiper-next",prevEl:".stock-swiper-prev"},pagination:{el:".stock-swiper-pagination",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'">'+(e+1)+"</span>"}},breakpoints:{768:{slidesPerView:2},1024:{slidesPerView:3},1300:{slidesPerView:4}}},(e=>{e&&e.on("slideChange",(function(t){console.log("*** mySwiper.activeIndex",e.activeIndex)}))})),((e,t,n,o)=>{let c;const i=function(){return e.matches?(c=new Swiper(".gallery__swiper",n),void(o&&o(c))):void(void 0!==c&&c.destroy(!0,!0))};(e=window.matchMedia(e)).addEventListener("change",i),i()})("(max-width: 768px)",0,{loop:!0,spaceBetween:8,slidesPerView:1.15,breakpoints:{500:{slidesPerView:1.5},768:{},1024:{},1300:{}}},(e=>{e&&e.on("slideChange",(function(t){console.log("*** mySwiper.activeIndex",e.activeIndex)}))}));var e=new Swiper(".detal-old__swiper-one",{loop:!0,spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0});new Swiper(".detal-old__swiper-two",{loop:!0,spaceBetween:10,slidesPerView:1.16,navigation:{nextEl:".detal-old__swiper-next",prevEl:".detal-old__swiper-prev"},thumbs:{swiper:e},breakpoints:{500:{slidesPerView:1.1},768:{slidesPerView:3},1024:{slidesPerView:1}}}),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".price-car").dataset.priceCar,t=document.getElementById("credit-sum"),n=document.getElementById("credit-payment"),o=document.getElementById("credit-term");t.value=l(e),n.value=l(0),o.value=o.value,d(o,"мес."),m(),d(t,"₽"),d(n,"₽"),t.addEventListener("input",(()=>u(t,"₽"))),n.addEventListener("input",(()=>{u(n,"₽"),function(){const o=parseFloat(n.value.replace(/\s|₽/g,""))||0,c=e-o;c<0?n.value=l(e):(t.value=l(c),d(t,"₽"),m())}()})),o.addEventListener("input",(()=>d(o,"мес.")));const c=document.querySelector(".calculator__credit-sum-minus"),i=document.querySelector(".calculator__credit-sum-plus"),a=document.querySelector(".calculator__credit-term-minus"),r=document.querySelector(".calculator__credit-term-plus");function s(o,c){const i=document.getElementById(o);let a=parseFloat(i.value.replace(/\s|₽|мес./g,""))||0;a+=c,"credit-sum"===o&&(a=Math.max(0,Math.min(a,e))),i.value=l(a),d(i,i.dataset.simbol),"credit-sum"===o&&function(){const o=parseFloat(t.value.replace(/\s|₽/g,""))||0,c=e-o;c<0?t.value=l(e):(n.value=l(c),d(n,"₽"),m())}(),m()}function l(e){return Math.floor(e).toLocaleString("ru-RU")}function d(e,t){e.value=e.value.replace(/\D/g,""),e.value=e.value.replace(/\B(?=(\d{3})+(?!\d))/g," "),e.value&&!e.value.endsWith(t)&&(e.value+=" "+t),p(e)}function u(e,t){const n=e.value.replace(/\D/g,"");e.value=e.value.replace(/\B(?=(\d{3})+(?!\d))/g," ");const o=l(n);e.value=o,o&&!o.endsWith(t)&&(e.value+=" "+t),p(e)}function p(e){const t=e.value.length;e.setSelectionRange(t-2,t-2)}function m(){const t=parseFloat(n.value.replace(/\s|₽/g,""))||0,c=parseInt(o.value)||0,i=e-t;if(i>0&&c>0){const e=.1/12,t=i*e/(1-Math.pow(1+e,-c));document.getElementById("monthly-payment").textContent=l(Math.round(t))+" ₽/мес"}else document.getElementById("monthly-payment").textContent="0 ₽/мес"}c.addEventListener("click",(function(){s("credit-sum",-1e4)})),i.addEventListener("click",(function(){s("credit-sum",1e4)})),a.addEventListener("click",(function(){s("credit-term",-1)})),r.addEventListener("click",(function(){s("credit-term",1)}))})),document.addEventListener("DOMContentLoaded",(function(){function e(e,t){const n=document.querySelectorAll(e),o=document.querySelectorAll(t);n.forEach((e=>{e.addEventListener("click",(function(){let t=e,c=t.getAttribute("data-tab"),i=document.querySelector(c);t.classList.contains("active")||(n.forEach((e=>e.classList.remove("active"))),o.forEach((e=>e.classList.remove("active"))),t.classList.add("active"),i.classList.add("active"))}))})),n.length>0&&n[0].click()}var t;!function(){const e=document.querySelectorAll(".new-cars__filter-top-buttons-btn"),t=document.querySelector(".all-auto"),n=document.querySelector(".new-cars__filter-btn-mobile-open-wrap");e.length&&t&&n?(console.log("Настройка фильтров..."),e[1].addEventListener("click",(()=>{t.classList.add("active")})),e[0].addEventListener("click",(()=>{t.classList.remove("active"),t.classList.remove("active-mobil")})),n.addEventListener("click",(function(){"Скрыть часть"===this.textContent?t.classList.add("active-mobil"):t.classList.remove("active-mobil")}))):console.error("Один или несколько элементов не найдены")}(),e(".brands__top-buttons-btn",".brands__tab"),e(".new-cars__filter-top-buttons-btn",".new-cars__filter-tabs"),t='[data-select="select"]',document.querySelectorAll(t).forEach((e=>{const n=e.querySelector('[data-select="select-open"]'),o=e.querySelector('[data-select="select-detal"]');e.addEventListener("click",(()=>{e.classList.toggle("active"),n.classList.toggle("active"),o.classList.toggle("active")})),n.querySelectorAll("div").forEach((t=>{t.addEventListener("click",(()=>{e.querySelector("p").textContent=t.textContent+" ",e.classList.remove("active"),n.classList.remove("active"),o.classList.remove("active")}))})),document.addEventListener("click",(c=>{c.target.closest(t)||(e.classList.remove("active"),n.classList.remove("active"),o.classList.remove("active"))}))}))})),function(){let e=new Image;e.onload=e.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}()})();